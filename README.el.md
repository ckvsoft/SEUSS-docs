![Logo](views/static/images/logo-seuss.png?raw=true "SEUSS")

# ΣΕΥΣΣ

### [SEUSS -> Smart Ess Unit Spotmarket Switcher]

#### Αναφέρετε τα σφάλματα και προτείνετε βελτιώσεις. Ευχαριστώ όλους όσους έχουν ήδη λάβει μέρος.

###### Εάν θέλετε να συνεισφέρετε επεκτάσεις σε αυτό, υποβάλετε το αίτημα έλξης στον κλάδο dev. Για διορθώσεις σφαλμάτων, το αίτημα έλξης μπορεί επίσης να γίνει στον κύριο κλάδο

### Τι κάνει αυτό το λογισμικό;

Αυτή είναι μια εφαρμογή Python 3 που ενεργοποιεί τη μονάδα ESS (ελεγκτή) την κατάλληλη στιγμή όταν οι ωριαίες τιμές δυναμικής ενέργειας είναι χαμηλές. Ή χρησιμοποιείται για εκφόρτιση όταν οι τιμές είναι εξαιρετικά υψηλές.

#### Τα συστήματα που υποστηρίζονται αυτήν τη στιγμή είναι:

### Μονάδες ESS

* * *

-   **_Συστήματα αποθήκευσης ενέργειας Victron Venus OS όπως η σειρά MultiPlus II_**

* * *

### Spot Markets

* * *

-   **_απάντηση_**
-   **_Enzo-E_**
-   **_Tibber_**

* * *

Ο έλεγχος της μονάδας ESS (ελεγκτής) γίνεται μέσω mqtt. Το πλεονέκτημα αυτού του ελέγχου είναι:
ότι αυτή η εφαρμογή δεν χρειάζεται να εκτελείται απευθείας στο VenusOS. Ο άμεσος έλεγχος με D-BUS βρίσκεται στα σκαριά

# Δοκιμασμένο

Αυτή η έκδοση ήταν επιτυχημένη με

* * *

-   **_Linux Ubuntu >= 22.04_**
-   **_Venus OS Raspberries >= vz.12_**

* * *

δοκιμασμένο

# Εγκαθιστώ

Κατεβάστε το σενάριο εγκατάστασης από το αποθετήριο GitHub εκτελέστε την ακόλουθη εντολή στο τερματικό σας:

    wget -O seuss_install.sh https://raw.githubusercontent.com/ckvsoft/SEUSS/dev/scripts/seuss_install.sh`

Εκτελέστε το σενάριο εγκατάστασης με πρόσθετες επιλογές για να προετοιμάσετε τα πάντα σε έναν υποκατάλογο για την επιθεώρησή σας. Για παράδειγμα:

    bash seuss_install.sh`

Ο προεπιλεγμένος κατάλογος είναι /data/seuss (Venus OS) Αλλά μπορείτε προαιρετικά να καθορίσετε έναν διαφορετικό κατάλογο χρησιμοποιώντας τη μεταβλητή περιβάλλοντος TARGET_DIRECTORY π.χ.

    TARGET_DIRECTORY=/opt/seuss bash seuss_install.sh`

Σε ένα Cerbo GX το σύστημα αρχείων είναι τοποθετημένο μόνο για ανάγνωση. Βλέπω<https://www.victronenergy.com/live/ccgx:root_access>.
Για να κάνετε το σύστημα αρχείων εγγράψιμο, πρέπει να εκτελέσετε την ακόλουθη εντολή πριν εκτελέσετε το σενάριο εγκατάστασης:

    /opt/victronenergy/swupdate-scripts/resize2fs.sh

# Διαμόρφωση

Μετά`SEUSS`έχει εγκατασταθεί με επιτυχία, ένας ιστότοπος είναι διαθέσιμος στη διεύθυνση IP και στη θύρα 5000 του`Computer/VenusOS`επί του οποίου`SEUSS`εγκαταστάθηκε.

-   Μπορείτε να δείτε ή να κατεβάσετε το αρχείο καταγραφής.
-   Επιπλέον, η διαμόρφωση μπορεί να πραγματοποιηθεί χρησιμοποιώντας το[Επεξεργαστής διαμόρφωσης]στοιχείο μενού.
-   Οι συμβουλές εργαλείων για τα περισσότερα σημεία εμφανίζονται εδώ.

#### Προβολή καταγραφής

-   ![Logo](views/static/images/logviewer.png?raw=true "SEUSS Log Viewer")

#### Επεξεργαστής διαμόρφωσης - Μονάδες ESS

-   ![Logo](views/static/images/configeditor_ess.png?raw=true "SEUSS Config Editor")

#### Config Editor - PV Panels

-   ![Logo](views/static/images/configeditor_panels.png?raw=true "SEUSS Config Editor")

Αυτά μπορούν επίσης να βρεθούν στην περιγραφή Ρυθμίσεις.
Για όσους προτιμούν να εργάζονται σε ένα αρχείο διαμόρφωσης, υπάρχει το config.json

# Ρυθμίσεις

## Γενικός

| Σύνθεση         | Εννοια                                                                                                                                  |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| `time_zone`     | Απαραίτητο για τον σωστό χρόνο των εργασιών με βάση τη γεωγραφική σας θέση.<br/>Μορφοποίηση όπως`Europe/Vienna`,`Europe/Amsterdam`, ... |
| `log_file_path` | Ορίζει μια εναλλακτική διαδρομή στην οποία αποθηκεύονται τα αρχεία καταγραφής.                                                          |
| `log_level`     | Το Loglevel που χρησιμοποιείται είναι:`INFO`,`WARNING`,`ERROR`και`DEBUG`. βλέπω[Επίπεδα καταγραφής](#loglevels)                         |

## Τιμές

#### Αλλάζετε τις τιμές (να χρησιμοποιείτε πάντα Cent/kWh, ανεξάρτητα από το αν χρησιμοποιείτε Awattar (εμφανίζει Cent/kWh) ή Entsoe API (εμφανίζει EUR/MWh) / καθαρές τιμές χωρίς φόρους).

| Σύνθεση                                    | Εννοια                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| ------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `use_second_day`                           | `enable/disable`να συγκρίνετε τις σημερινές και τις αυριανές τιμές αν γίνουν διαθέσιμες<br/>Σημείωση: Εάν το ενεργοποιήσετε και οι τιμές μειωθούν σε αρκετές ημέρες, είναι πιθανό να μην υπάρξει χρέωση ή αλλαγή για αρκετές ημέρες μέχρι να φτάσετε στις χαμηλότερες τιμές.                                                                                                                                                                                                                                                                                                                                |
| `number_of_lowest_prices_for_charging`     | Εδώ μπορούν να χρησιμοποιηθούν δύο λειτουργίες.<br/>mode1:<br/>_τον αριθμό των φθηνότερων τιμών στις οποίες πρέπει/μπορεί να πραγματοποιηθεί η χρέωση. Εδώ εισάγετε ακέραιους αριθμούς<br/>mode2:<br/>_Εδώ ο αριθμός των τιμών καθορίζεται με βάση τη μέση τιμή. Για αυτή τη λειτουργία εισάγετε δεκαδικούς αριθμούς. Π.χ. 0,85 για να λάβετε όλες τις τιμές που είναι 85% κάτω από το μέσο όρο. Αυτό που έχει σημασία εδώ είναι ο προσδιορισμός μιας τιμής κόμματος. Με το 1.0 υποτίθεται ότι λαμβάνεται το 100% της μέσης τιμής (δεν έχει νόημα) αλλά αν εισαχθεί 1 είναι 1 φθηνότερη τιμή                |
| `number_of_highest_prices_for_discharging` | Εδώ μπορούν να χρησιμοποιηθούν δύο λειτουργίες.<br/>mode1:<br/>_τον αριθμό των ακριβότερων τιμών στις οποίες πρέπει/μπορεί να πραγματοποιηθεί η εκφόρτωση. Εδώ εισάγετε ακέραιους αριθμούς<br/>mode2:<br/>_Εδώ ο αριθμός των τιμών καθορίζεται με βάση τη μέση τιμή. Για αυτή τη λειτουργία εισάγετε δεκαδικούς αριθμούς. Π.χ. 1,25 για να λάβετε όλες τις τιμές που είναι 25% πάνω από το μέσο όρο.<br/>Αυτό που είναι σχετικό εδώ είναι ο προσδιορισμός μιας τιμής κόμματος. Με το 1.0 υποτίθεται ότι λαμβάνεται το 100% της μέσης τιμής (δεν έχει νόημα) αλλά αν εισαχθεί το 1 είναι η 1 ακριβότερη τιμή |
| `charging_price_limit`                     | Η χρέωση είναι πάντα ενεργοποιημένη κάτω από αυτήν την τιμή<br/>τον αριθμό των ακριβότερων τιμών στις οποίες πρέπει/μπορεί να πραγματοποιηθεί η εκφόρτωση                                                                                                                                                                                                                                                                                                                                                                                                                                                   |

## Μονάδες ESS

### Victron

| Σύνθεση               | Εννοια                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| :-------------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `use_vrm`             | Εάν αυτό το σημείο είναι ενεργοποιημένο (αληθές), γίνεται προσπάθεια σύνδεσης στο Victron μέσω της πύλης VRM.<br/>Αυτό απαιτεί χρήστη/κωδικό πρόσβασης στην πύλη VRM                                                                                                                                                                                                                                                                                               |
| `ip_address`          | Η τοπική διεύθυνση IP του Victron.<br/>Αυτό απαιτείται εάν`use_vrm`είναι απενεργοποιημένο (ψευδές).<br/>Διαφορετικά αυτό το πεδίο παραμένει κενό                                                                                                                                                                                                                                                                                                                   |
| `unit_id`             | Αναγνωριστικό πύλης VRM<br/>μπορεί να βρεθεί στο`Settings / VRM online portal / VRM Portal Id`.<br/>Σημείωση: Αυτό το αναγνωριστικό απαιτείται για πρόσβαση στο Victron ακόμα κι αν δεν χρησιμοποιείτε πύλη VRM                                                                                                                                                                                                                                                    |
| `user`                | διεύθυνση αλληλογραφίας που χρησιμοποιείτε για να συνδεθείτε στην πύλη VRM                                                                                                                                                                                                                                                                                                                                                                                         |
| `password`            | κωδικό πρόσβασης που χρησιμοποιείτε για να συνδεθείτε στην πύλη VRM                                                                                                                                                                                                                                                                                                                                                                                                |
| `max_discharge_power` | Προεπιλογή: -1<br/>Εάν χρησιμοποιείτε`Limit inverter power`στο μενού ESS τότε αυτή η τιμή πρέπει να εισαχθεί εδώ.<br/>Εάν ο μετατροπέας έχει ρυθμιστεί σε`Discharge false`από αυτήν την εφαρμογή τότε αυτή η τιμή θα αντικατασταθεί στο ESS.<br/>Αυτό το όριο εδώ έχει οριστεί στη λειτουργία εκφόρτισης στο ESS.<br/>Εάν δεν έχει οριστεί όριο, αφήστε την τιμή στο`-1`.<br/>Παράδειγμα: Enter`1000`να περιοριστεί η απόρριψη σε`1000W`, Εισαγω`-1`για πλήρη ισχύ |
| `only_observation`    | Αν`only observation`είναι ενεργοποιημένη η essunit θα χρησιμοποιηθεί μόνο για στατιστικούς σκοπούς. Το essunit δεν εκτελεί καμία προϋπόθεση                                                                                                                                                                                                                                                                                                                        |
| `enabled`             | Για να χρησιμοποιήσετε αυτήν την καταχώρηση πρέπει να είναι`enabled`. Σε διαφορετική περίπτωση`disabled`                                                                                                                                                                                                                                                                                                                                                           |

## Spot Markets

### απάντηση

| Σύνθεση   | Εννοια                                                                                                   |
| :-------- | :------------------------------------------------------------------------------------------------------- |
| `country` | Επιλέξτε τοποθεσία AT ή DE                                                                               |
| `primary` | Εάν αυτή η αγορά είναι ενεργοποιημένη, αυτό το σημείο την ορίζει ως την κύρια αγορά                      |
| `enabled` | Για να χρησιμοποιήσετε αυτήν την καταχώρηση πρέπει να είναι`enabled`. Σε διαφορετική περίπτωση`disabled` |

### Ο Έντσο είναι

| Σύνθεση      | Εννοια                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| :----------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `api_token`  | Πώς να αποκτήσετε το δωρεάν διακριτικό ασφαλείας api:<br/>1. Πηγαίνετε στο[ήττψ://τρανσπαρενκυ.εντσοι.ευ/](https://transparency.entsoe.eu/)--> εγγραφείτε και δημιουργήστε λογαριασμό<br/>2. Στείλτε ένα email στο[τρανσπαρενκυ@εντσοι.ευ](mailto:transparency@entsoe.eu)με "Restful API πρόσβαση" στη γραμμή θέματος<br/>3. Το ENTSO-E Helpdesk θα απαντήσει στο αίτημά σας εντός 3 εργάσιμων ημερών.<br/>4. Δημιουργήστε ένα διακριτικό ασφαλείας στο[ήττψ://τρανσπαρενκυ.εντσοι.ευ/υσρμ/οσέρ/μυΑσκούντΣέττινγσ](https://transparency.entsoe.eu/usrm/user/myAccountSettings) |
| `in_domain`  | Για να μάθετε το κλειδί εισόδου και εξόδου του τομέα σας, μεταβείτε στη διεύθυνση:<br/>[ήττψ://ωωω.εντσοι.ευ/τάτα/ενεργή-ιδεντίφηκατιον-κότες-εις/εις-άρια-κότες-μαπ/](https://www.entsoe.eu/data/energy-identification-codes-eic/eic-area-codes-map/)                                                                                                                                                                                                                                                                                                                         |
| `out_domain` | αρέσει`in_domain`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `primary`    | Εάν αυτή η αγορά είναι ενεργοποιημένη, αυτό το σημείο την ορίζει ως την κύρια αγορά                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `enabled`    | Για να χρησιμοποιήσετε αυτήν την καταχώρηση πρέπει να είναι`enabled`. Σε διαφορετική περίπτωση`disabled`                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |

### Tibber

| Σύνθεση      | Εννοια                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| :----------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `api_token`  | Για να λάβετε το tibber_api_key:<br/>1. συνδεθείτε με έναν δωρεάν λογαριασμό πελάτη ή Tibber στο[ήττψ://δεβελόπερ.τιββερ.κομ/σεττινγσ/ακκεςς-τοκεν](https://developer.tibber.com/settings/access-token)<br/>2. Δημιουργήστε ένα διακριτικό επιλέγοντας τα πεδία που χρειάζεστε (επιλέξτε "τιμή")<br/>3. Χρησιμοποιήστε αυτόν τον σύνδεσμο για να δημιουργήσετε έναν δωρεάν λογαριασμό με το smartphone σας:[ήττψ://τιββερ.κομ/δε/ινβίτη/όξγφπχ2e](https://tibber.com/de/invite/ojgfbx2e) |
| `price_unit` | Οριστεί σε:<br/>"energy" για χρήση των spotmarket-prices (προεπιλογή),<br/>"σύνολο" για τη χρήση των συνολικών τιμών συμπεριλαμβανομένων των φόρων και των τελών,<br/>«φόρος» να χρησιμοποιεί μόνο τους φόρους και τα τέλη                                                                                                                                                                                                                                                               |
| `primary`    | Εάν αυτή η αγορά είναι ενεργοποιημένη, αυτό το σημείο την ορίζει ως την κύρια αγορά                                                                                                                                                                                                                                                                                                                                                                                                      |
| `enabled`    | Για να χρησιμοποιήσετε αυτήν την καταχώρηση πρέπει να είναι`enabled`. Σε διαφορετική περίπτωση`disabled`                                                                                                                                                                                                                                                                                                                                                                                 |

## Φ/Β Πίνακες

| Σύνθεση           | Εννοια                                                                                                    |
| :---------------- | :-------------------------------------------------------------------------------------------------------- |
| `locLat`          | Γεωγραφικό πλάτος                                                                                         |
| `locLong`         | Γεωγραφικό μήκος                                                                                          |
| `angle`           | Γωνία των πάνελ σας 0 (οριζόντια) … 90 (κάθετη)                                                           |
| `direction`       | Επίπεδο αζιμούθιο, -180 … 180 (-180 = βόρεια, -90 = ανατολικά, 0 = νότια, 90 = δυτικά, 180 = βόρεια)      |
| `totPower`        | ισχύς εγκατεστημένων μονάδων σε κιλά watt                                                                 |
| `total_area`      | Συνολική επιφάνεια των πάνελ σε τετραγωνικά μέτρα                                                         |
| `damping_morning` | Με αυτήν την παράμετρο μπορείτε να προσαρμόσετε το αποτέλεσμα το πρωί. Μεταβλητή τιμή 0..1, προεπιλογή 0  |
| `damping_evening` | Με αυτήν την παράμετρο μπορείτε να προσαρμόσετε το αποτέλεσμα το βράδυ. Μεταβλητή τιμή 0..1, προεπιλογή 0 |
| `enabled`         | Για να χρησιμοποιήσετε αυτήν την καταχώρηση πρέπει να είναι`enabled`. Σε διαφορετική περίπτωση`disabled`  |

* * *

## Loglevels

### `ERROR`

ο`ERROR`Το επίπεδο καταγραφής υποδεικνύει συνθήκες σφάλματος σε μια εφαρμογή που εμποδίζουν την εκτέλεση μιας συγκεκριμένης λειτουργίας. Ενώ η εφαρμογή μπορεί να συνεχίσει να λειτουργεί σε μειωμένο επίπεδο λειτουργικότητας ή απόδοσης,<br/>`ERROR`τα αρχεία καταγραφής υποδηλώνουν ζητήματα που πρέπει να διερευνηθούν εγκαίρως.

### `WARN`

Γεγονότα που καταγράφονται στο`WARN`επίπεδο συνήθως δείχνει ότι κάτι απροσδόκητο έχει
συνέβη, αλλά η εφαρμογή μπορεί να συνεχίσει να λειτουργεί κανονικά προς το παρόν.
Χρησιμοποιείται επίσης για να υποδηλώσει συνθήκες που πρέπει να αντιμετωπιστούν αμέσως πριν από αυτές
κλιμακωθεί σε προβλήματα για την εφαρμογή.

### `INFO`

ο`INFO`επίπεδο καταγράφει γεγονότα στο σύστημα που είναι σημαντικά για το
επιχειρηματικός σκοπός της εφαρμογής. Τέτοια συμβάντα καταγράφονται για να δείξουν ότι το σύστημα είναι
λειτουργεί κανονικά. Τα συστήματα παραγωγής συνήθως καταγράφουν από προεπιλογή σε αυτό το επίπεδο
έτσι ώστε μια περίληψη της κανονικής συμπεριφοράς της εφαρμογής να είναι ορατή σε οποιονδήποτε
 επανεξέταση των αρχείων καταγραφής.

### `DEBUG`

ο`DEBUG`επίπεδο χρησιμοποιείται για την καταγραφή μηνυμάτων που βοηθούν τους προγραμματιστές να αναγνωρίσουν
ζητήματα κατά τη διάρκεια μιας συνεδρίας εντοπισμού σφαλμάτων. Το περιεχόμενο των μηνυμάτων που καταγράφονται στο DEBUG
Το επίπεδο θα ποικίλλει ανάλογα με την εφαρμογή σας, αλλά συνήθως περιέχουν
λεπτομερείς πληροφορίες που βοηθούν τους προγραμματιστές του στην αντιμετώπιση προβλημάτων
αποτελεσματικά. Αυτό μπορεί να περιλαμβάνει την κατάσταση των μεταβλητών εντός του περιβάλλοντος πεδίου ή
σχετικούς κωδικούς σφαλμάτων. |

## Εμπνευση

Η ιδέα είναι εμπνευσμένη από το έργο @christian1980nrw που συνδέεται παρακάτω. Αυτό το έργο είναι το πρώτο μου με το Victron Venus OS, γι' αυτό υιοθέτησα μερικές ιδέες και προσεγγίσεις από τα ακόλουθα έργα. Η προσέγγιση είναι η ίδια και για πολύ στενά συστήματα η υλοποίηση με ένα σενάριο bash είναι μάλλον καλύτερη

##### – Σας ευχαριστώ πολύ για τη μετάδοση της γνώσης:

-   [Spot market switcher](https://github.com/christian1980nrw/Spotmarket-Switcher)
-   [δυναμική-ουσία](https://github.com/tfranssen/dynamic-ess)
